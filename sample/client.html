<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title> WebSocket通信 </title>
    <script type="text/javascript">
        // Web Socketオブジェクト生成
        var webSocket = new WebSocket("ws://127.0.0.1:30000");
        webSocket.onopen = function() {
           document.getElementById('show').innerHTML += "接続しました。" + "<br/>";
            // onmessageリスナー
            webSocket.onmessage = function(event) {
                // 取得＆表示
                document.getElementById('show').innerHTML += event.data + "<br/>";
            }
        };
        var sendMsg = function(val) {
            var inputElement = document.getElementById('msg');
            // 送信
            webSocket.send(inputElement.value);
            // クリア
            inputElement.value = "";
        }
    </script>
</head>

<body>
    <div style="width:500px;height:200px;
  overflow-y:auto;border:1px solid #333;" id="show"></div>
    <input type="text" size="80" id="msg" name="msg" />
    <input type="button" value="送信" onclick="sendMsg();" />
</body>

</html>
